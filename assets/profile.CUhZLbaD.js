import{r as c,j as e,N as v}from"./react-vendor.B2Pejlkl.js";import{a as h}from"./vendor.CIs6xaro.js";import{u as N}from"./study.C8Ku--HU.js";const f=c.createContext(void 0),P=({children:t})=>{const[m,r]=c.useState(null),[a,d]=c.useState(localStorage.getItem("token")),[x,i]=c.useState(!1),n=c.useMemo(()=>{const s=h.create({baseURL:"https://backend-vinr.onrender.com/api"});return s.interceptors.request.use(o=>{const l=localStorage.getItem("token");return l&&(o.headers.Authorization=`Bearer ${l}`),o}),s},[]);c.useEffect(()=>{a&&u()},[a]);const u=async()=>{try{const s=await n.get("/auth/profile");r(s.data)}catch(s){console.error("Profile fetch failed:",s),g()}},b=async(s,o)=>{i(!0);try{const l=await h.post("https://backend-vinr.onrender.com/api/auth/login",{identifier:s,password:o}),{token:p,user:y}=l.data;localStorage.setItem("token",p),d(p),r(y)}catch(l){throw l.response?.data?l.response.data:new Error("Login failed")}finally{i(!1)}},j=async s=>{i(!0);try{return(await h.post("https://backend-vinr.onrender.com/api/auth/register",s)).data}catch(o){throw o.response?.data?o.response.data:new Error("Registration failed")}finally{i(!1)}},g=()=>{localStorage.removeItem("token"),d(null),r(null)};return e.jsx(f.Provider,{value:{user:m,token:a,login:b,register:j,logout:g,isLoading:x},children:t})},k=()=>{const t=c.useContext(f);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},S=()=>{const{user:t,isLoading:m}=k(),{t:r,lang:a}=N();if(m)return e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-600"})});if(!t)return e.jsx(v,{to:"/",replace:!0});const d=n=>new Date(n).toLocaleDateString(a==="bn"?"bn-BD":"en-US",{year:"numeric",month:"long",day:"numeric"}),x=n=>({Science:a==="bn"?"বিজ্ঞান":"Science",Arts:a==="bn"?"মানবিক":"Arts",Commerce:a==="bn"?"বাণিজ্য":"Commerce"})[n]||n,i=n=>n==="SSC"?"SSC":"HSC";return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:r("profile.title")}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 pb-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:t.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:t.name}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["@",t.username]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:r("profile.email")}),e.jsx("p",{className:"text-lg",children:t.email})]}),t.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:r("profile.phone")}),e.jsx("p",{className:"text-lg",children:t.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:r("profile.studyLevel")}),e.jsx("p",{className:"text-lg",children:i(t.study_level)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:r("profile.group")}),e.jsx("p",{className:"text-lg",children:x(t.group)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:r("profile.memberSince")}),e.jsx("p",{className:"text-lg",children:d(t.created_at)})]})]})]})})]})})},C=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"}));export{P as A,C as P,k as u};
